<nav class="col-sm-3" id="myScrollspy">
    <ul class="nav nav-pills nav-stacked well" data-spy="affix" data-offset-top="600" style="background-color: white">
        <li><a href="#section1"> <%= texts.p4s1 %> </a></li>
        <li><a href="#section2"> <%= texts.p4s2 %> </a></li>
        <li><a href="#IAPInit">IAP初始化</a></li>
        <li><a href="#Pay"> <%= texts.p4s3 %> </a></li>
        <li><a href="#GetOrder"> <%= texts.p4s4 %> </a></li>
        <li><a href="#RestorePurchase">恢復購買</a></li>
    </ul>
</nav>

<div class="col-sm-9">
    <div id="section1">
        <h1><%= texts.p4s1 %></h1>
        <hr>
    </div>
    <br>
    <div id="section2">
        <h1><%= texts.p4s2 %></h1>
        <hr>
        <h4><%= texts.p4h2 %></h4>
        <br>
        <h4>XCode 設定</h4>
        <hr>
        <ol>
            <li>在navigator區點選專案</li>
            <li>在editor區點選Capabilities</li>
            <li>啟用In-App Purchase</li>
            <li>在要使用IAP的.swift檔案加入<code>import StoreKit</code></li>
        </ol>
        <div class="well well-sm">
            <img src=<%= "assets/img/" + lang + "/swiftpic05.png" %>>
        </div>
    </div>
    <br>
    <div id="IAPInit">
        <h1>IAP初始化</h1>
        <hr>
        <%= texts.ApiName %><code>IAPInit</code><br/>
        <%= texts.ApiExplain %>In-App Purchase初始化之後才能開始購買<br/>
        <%= texts.Parameter %>productIDs<br/>
        <%= texts.Example %>
        <% include code/swift-IAPInit.html %>
        <%= texts.ReturnCode %>
        <ul>
            <li>Code: 1131, IAP初始化成功</li>
            <li>Code: 1132, IAP初始化失敗</li>
            <li>Code: 1133, 拿不到商品資訊</li>
            <li>Code: 1134, Msg: 列出無效的商品ID</li>
        </ul>
    </div>
    <br>
    <div id="Pay">
        <h1><%= texts.p4s3 %></h1>
        <hr>
        <%= texts.ApiName %><code>Pay</code><br/>
        <%= texts.ApiExplain %><%= texts.p4h3 %><br/>
        <%= texts.Parameter %>payRequest<br/>
        <ul>
            <li>SgSDKPayRequest有以下的屬性可以存取</li>
            <li>ProductId: 產品ID(必填)</li>
            <li>ProductName: 產品名稱</li>
            <li>ProductDesc: 產品說明</li>
            <li>PaymentMethod: 產品種類 ex. managed, subscription(必填)</li>
            <li>PaymentChannel: 平台 ex.AppStore</li>
            <li>Price: 產品價格</li>
            <li>ServerId: Server ID</li>
            <li>ServerName: Server 名稱</li>
            <li>RoleId: 角色ID</li>
            <li>RoleName: 角色名稱</li>
            <li>RoleLevel: 角色等級</li>
            <li>PayNotifyUrl: 驗證地址</li>
        </ul>

        <table class="table"> <!--Gem Start-->
            <thead>
            <tr>
                <th>
                    <%= texts.p4t1 %>
                </th>
                <th>
                    <%= texts.p4t2 %>
                </th>
                <th>
                    <%= texts.p4t3 %>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr class="active">
                <td>
                    ProductId
                </td>
                <td>
                    Y
                </td>
                <td>
                    <%= texts.p4d1 %> <br> <%= texts.p4p1 %>
                </td>
            </tr>

            <tr>
                <td>
                    ProductName
                </td>
                <td>
                    Y
                </td>
                <td>
                    <%= texts.p4d2 %> <br> <%= texts.p4p1 %>
                </td>
            </tr>

            <tr class="active">
                <td>
                    PaymentMethod
                </td>
                <td>
                    Y
                </td>
                <td>
                    <%= texts.p4d3 %> <br> <%= texts.p4p1 %>
                </td>
            </tr>
            </tbody>
        </table>

        <%= texts.Example %>
        <pre>SgSDK.Instance.Pay(payRequest: initPayReq(productId: productIDs[0], payMethod: "managed"))</pre>
        <% include code/swift-initPayReq.html %>
        <%= texts.ReturnCode %>
        <ul>
            <li>Code: 1101, SgServer驗證成功, Data: SgSDKPayResponse</li>
            <li>Code: 1130, IAP未初始化</li>
            <li>Code: 1135, 查無商品ID</li>
            <li>Code: 1136, 與appstore交易成功</li>
            <li>Code: 1137, 與appstore交易失敗</li>
            <li>Code: 1142, 交易處理中</li>
            <li><a href="/webapi-init#section5"> <%= texts.LookCode %> </a></li>
        </ul>
    </div>
    <br>
    <div id="GetOrder">
        <h1><%= texts.p4s4 %></h1>
        <hr>
        <%= texts.ApiName %><code>GetOrder</code><br/>
        <%= texts.ApiExplain %><%= texts.p4h41 %><br/>
        <%= texts.Parameter %>game_key，payResponse</a> <br/>
        <ul>
            <li>SgSDKPayResponse有SgSDKPayRequest的全部屬性加上以下三個屬性</li>
            <li>Code: Error code</li>
            <li>Msg</li>
            <li>Sign</li>
        </ul>
        <%= texts.Example %>
        <pre>SgSDK.Instance.GetOrder(GameKey, 上次交易收到的SgSDKPayResponse)</pre>
        <%= texts.ReturnCode %>
        <ul>
            <li>Code: 1201, 取得訂單成功, Data: SgSDKPayResponse</li>
            <li><a href="/webapi-init#section5"> <%= texts.LookCode %> </a></li>
        </ul>
    </div>
    <br>
    <div id="RestorePurchase">
        <h1>恢復購買</h1>
        <hr>
        <%= texts.ApiName %><code>RestorePurchase</code><br/>
        <%= texts.ApiExplain %>恢復購買，換手機時，只有在商品種類是Non-Consumable, Auto-renewing subscripton這兩種商品會用到<br/>
        <%= texts.Example %>
        <pre>SgSDK.Instance.RestorePurchase()</pre>
        <%= texts.ReturnCode %>
        <ul>
            <li>Code: 1140, 沒有商品可以恢復</li>
            <li>Code: 1141, 商品恢復成功</li>
        </ul>
    </div>
</div>